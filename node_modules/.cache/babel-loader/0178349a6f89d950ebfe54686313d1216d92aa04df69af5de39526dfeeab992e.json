{"ast":null,"code":"// src/services/googleSheetsService.js\nimport { GOOGLE_CONFIG, HORAIRES, JOURS_FERIES } from '../config/googleSheets';\nclass GoogleSheetsService {\n  constructor() {\n    this.gapiLoaded = false;\n    this.gisLoaded = false;\n    this.tokenClient = null;\n    this.accessToken = null;\n  }\n\n  // Initialisation de l'API Google\n  async initialize() {\n    return new Promise((resolve, reject) => {\n      // Chargement du script GAPI\n      if (!window.gapi) {\n        const script1 = document.createElement('script');\n        script1.src = 'https://apis.google.com/js/api.js';\n        script1.onload = () => {\n          window.gapi.load('client', async () => {\n            await window.gapi.client.init({\n              apiKey: GOOGLE_CONFIG.API_KEY,\n              discoveryDocs: GOOGLE_CONFIG.DISCOVERY_DOCS\n            });\n            this.gapiLoaded = true;\n            if (this.gisLoaded) resolve();\n          });\n        };\n        script1.onerror = reject;\n        document.body.appendChild(script1);\n      }\n\n      // Chargement du script GIS (Google Identity Services)\n      if (!window.google) {\n        const script2 = document.createElement('script');\n        script2.src = 'https://accounts.google.com/gsi/client';\n        script2.onload = () => {\n          this.tokenClient = window.google.accounts.oauth2.initTokenClient({\n            client_id: GOOGLE_CONFIG.CLIENT_ID,\n            scope: GOOGLE_CONFIG.SCOPES,\n            callback: '' // sera défini lors de l'appel\n          });\n          this.gisLoaded = true;\n          if (this.gapiLoaded) resolve();\n        };\n        script2.onerror = reject;\n        document.body.appendChild(script2);\n      }\n    });\n  }\n\n  // Récupérer toutes les réservations\n  async getAllReservations() {\n    try {\n      const response = await window.gapi.client.sheets.spreadsheets.values.get({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A2:M`\n      });\n      const rows = response.result.values || [];\n      return rows.map((row, index) => ({\n        id: row[0] || `res_${index}`,\n        salle: row[1],\n        dateDebut: row[2],\n        heureDebut: row[3],\n        dateFin: row[4],\n        heureFin: row[5],\n        nom: row[6],\n        prenom: row[7],\n        service: row[8],\n        objet: row[9],\n        recurrence: row[10] === 'OUI',\n        recurrenceJusquau: row[11] || null,\n        email: row[12] || ''\n      }));\n    } catch (error) {\n      console.error('Erreur lors de la récupération des réservations:', error);\n      throw error;\n    }\n  }\n\n  // Vérifier les conflits de réservation\n  async checkConflicts(nouvelleReservation) {\n    const reservations = await this.getAllReservations();\n    const conflicts = reservations.filter(res => {\n      // Même salle ?\n      if (res.salle !== nouvelleReservation.salle) return false;\n\n      // Vérifier le chevauchement temporel\n      const resDebut = new Date(`${res.dateDebut}T${res.heureDebut}`);\n      const resFin = new Date(`${res.dateFin}T${res.heureFin}`);\n      const newDebut = new Date(`${nouvelleReservation.dateDebut}T${nouvelleReservation.heureDebut}`);\n      const newFin = new Date(`${nouvelleReservation.dateFin}T${nouvelleReservation.heureFin}`);\n\n      // Il y a conflit si les périodes se chevauchent\n      return newDebut < resFin && newFin > resDebut;\n    });\n    return conflicts;\n  }\n\n  // Ajouter une nouvelle réservation\n  async addReservation(reservation) {\n    try {\n      // Vérifier d'abord les conflits\n      const conflicts = await this.checkConflicts(reservation);\n      if (conflicts.length > 0) {\n        throw new Error('CONFLIT: Un ou plusieurs créneaux sont déjà réservés');\n      }\n\n      // Générer un ID unique\n      const id = `RES_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const values = [[id, reservation.salle, reservation.dateDebut, reservation.heureDebut, reservation.dateFin, reservation.heureFin, reservation.nom, reservation.prenom, reservation.service, reservation.objet, reservation.recurrence ? 'OUI' : 'NON', reservation.recurrenceJusquau || '', reservation.email || '']];\n      await window.gapi.client.sheets.spreadsheets.values.append({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A:M`,\n        valueInputOption: 'USER_ENTERED',\n        resource: {\n          values\n        }\n      });\n      return {\n        success: true,\n        id\n      };\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout de la réservation:', error);\n      throw error;\n    }\n  }\n\n  // Supprimer une réservation\n  async deleteReservation(reservationId) {\n    try {\n      const response = await window.gapi.client.sheets.spreadsheets.values.get({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A:A`\n      });\n      const rows = response.result.values || [];\n      const rowIndex = rows.findIndex(row => row[0] === reservationId);\n      if (rowIndex === -1) {\n        throw new Error('Réservation non trouvée');\n      }\n\n      // Supprimer la ligne (rowIndex + 1 car on commence à 1 dans Sheets)\n      await window.gapi.client.sheets.spreadsheets.batchUpdate({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        resource: {\n          requests: [{\n            deleteDimension: {\n              range: {\n                sheetId: 0,\n                // ID de l'onglet Réservations\n                dimension: 'ROWS',\n                startIndex: rowIndex + 1,\n                endIndex: rowIndex + 2\n              }\n            }\n          }]\n        }\n      });\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Erreur lors de la suppression:', error);\n      throw error;\n    }\n  }\n\n  // Calculer la disponibilité d'une date\n  async getDateAvailability(date) {\n    const reservations = await this.getAllReservations();\n    const dateStr = this.formatDate(date);\n\n    // Vérifier si c'est un dimanche ou jour férié\n    if (date.getDay() === 0 || JOURS_FERIES.includes(dateStr)) {\n      return 'closed'; // Fermé\n    }\n\n    // Compter les créneaux réservés pour cette date\n    const reservationsDuJour = reservations.filter(res => res.dateDebut === dateStr || res.dateDebut <= dateStr && res.dateFin >= dateStr);\n    if (reservationsDuJour.length === 0) {\n      return 'available'; // Toutes les salles disponibles - VERT\n    }\n\n    // Calculer le nombre total de créneaux possibles\n    const nbSalles = 9; // SALLES.length\n    const nbCreneaux = HORAIRES.HEURE_FIN - HORAIRES.HEURE_DEBUT; // 14 créneaux (8h-22h)\n    const totalCreneauxPossibles = nbSalles * nbCreneaux;\n\n    // Compter les créneaux réservés\n    let creneauxReserves = 0;\n    reservationsDuJour.forEach(res => {\n      const debut = parseInt(res.heureDebut.split(':')[0]);\n      const fin = parseInt(res.heureFin.split(':')[0]);\n      creneauxReserves += fin - debut;\n    });\n    const tauxOccupation = creneauxReserves / totalCreneauxPossibles;\n    if (tauxOccupation >= 1) {\n      return 'full'; // Complet - NOIR\n    } else if (tauxOccupation > 0.7) {\n      return 'busy'; // Très occupé - ROUGE\n    } else if (tauxOccupation > 0.3) {\n      return 'partial'; // Partiellement occupé - ORANGE\n    } else {\n      return 'available'; // Disponible - VERT\n    }\n  }\n\n  // Utilitaire: formater une date en YYYY-MM-DD\n  formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  // Utilitaire: formater une heure en HH:00\n  formatTime(hour) {\n    return `${String(hour).padStart(2, '0')}:00`;\n  }\n}\nexport default new GoogleSheetsService();","map":{"version":3,"names":["GOOGLE_CONFIG","HORAIRES","JOURS_FERIES","GoogleSheetsService","constructor","gapiLoaded","gisLoaded","tokenClient","accessToken","initialize","Promise","resolve","reject","window","gapi","script1","document","createElement","src","onload","load","client","init","apiKey","API_KEY","discoveryDocs","DISCOVERY_DOCS","onerror","body","appendChild","google","script2","accounts","oauth2","initTokenClient","client_id","CLIENT_ID","scope","SCOPES","callback","getAllReservations","response","sheets","spreadsheets","values","get","spreadsheetId","SPREADSHEET_ID","range","SHEETS","RESERVATIONS","rows","result","map","row","index","id","salle","dateDebut","heureDebut","dateFin","heureFin","nom","prenom","service","objet","recurrence","recurrenceJusquau","email","error","console","checkConflicts","nouvelleReservation","reservations","conflicts","filter","res","resDebut","Date","resFin","newDebut","newFin","addReservation","reservation","length","Error","now","Math","random","toString","substr","append","valueInputOption","resource","success","deleteReservation","reservationId","rowIndex","findIndex","batchUpdate","requests","deleteDimension","sheetId","dimension","startIndex","endIndex","getDateAvailability","date","dateStr","formatDate","getDay","includes","reservationsDuJour","nbSalles","nbCreneaux","HEURE_FIN","HEURE_DEBUT","totalCreneauxPossibles","creneauxReserves","forEach","debut","parseInt","split","fin","tauxOccupation","year","getFullYear","month","String","getMonth","padStart","day","getDate","formatTime","hour"],"sources":["C:/Users/Guyniole/Desktop/reservation-salles/src/services/googleSheetsService.js"],"sourcesContent":["// src/services/googleSheetsService.js\nimport { GOOGLE_CONFIG, HORAIRES, JOURS_FERIES } from '../config/googleSheets';\n\nclass GoogleSheetsService {\n  constructor() {\n    this.gapiLoaded = false;\n    this.gisLoaded = false;\n    this.tokenClient = null;\n    this.accessToken = null;\n  }\n\n  // Initialisation de l'API Google\n  async initialize() {\n    return new Promise((resolve, reject) => {\n      // Chargement du script GAPI\n      if (!window.gapi) {\n        const script1 = document.createElement('script');\n        script1.src = 'https://apis.google.com/js/api.js';\n        script1.onload = () => {\n          window.gapi.load('client', async () => {\n            await window.gapi.client.init({\n              apiKey: GOOGLE_CONFIG.API_KEY,\n              discoveryDocs: GOOGLE_CONFIG.DISCOVERY_DOCS,\n            });\n            this.gapiLoaded = true;\n            if (this.gisLoaded) resolve();\n          });\n        };\n        script1.onerror = reject;\n        document.body.appendChild(script1);\n      }\n\n      // Chargement du script GIS (Google Identity Services)\n      if (!window.google) {\n        const script2 = document.createElement('script');\n        script2.src = 'https://accounts.google.com/gsi/client';\n        script2.onload = () => {\n          this.tokenClient = window.google.accounts.oauth2.initTokenClient({\n            client_id: GOOGLE_CONFIG.CLIENT_ID,\n            scope: GOOGLE_CONFIG.SCOPES,\n            callback: '', // sera défini lors de l'appel\n          });\n          this.gisLoaded = true;\n          if (this.gapiLoaded) resolve();\n        };\n        script2.onerror = reject;\n        document.body.appendChild(script2);\n      }\n    });\n  }\n\n  // Récupérer toutes les réservations\n  async getAllReservations() {\n    try {\n      const response = await window.gapi.client.sheets.spreadsheets.values.get({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A2:M`,\n      });\n\n      const rows = response.result.values || [];\n      return rows.map((row, index) => ({\n        id: row[0] || `res_${index}`,\n        salle: row[1],\n        dateDebut: row[2],\n        heureDebut: row[3],\n        dateFin: row[4],\n        heureFin: row[5],\n        nom: row[6],\n        prenom: row[7],\n        service: row[8],\n        objet: row[9],\n        recurrence: row[10] === 'OUI',\n        recurrenceJusquau: row[11] || null,\n        email: row[12] || '',\n      }));\n    } catch (error) {\n      console.error('Erreur lors de la récupération des réservations:', error);\n      throw error;\n    }\n  }\n\n  // Vérifier les conflits de réservation\n  async checkConflicts(nouvelleReservation) {\n    const reservations = await this.getAllReservations();\n    \n    const conflicts = reservations.filter(res => {\n      // Même salle ?\n      if (res.salle !== nouvelleReservation.salle) return false;\n\n      // Vérifier le chevauchement temporel\n      const resDebut = new Date(`${res.dateDebut}T${res.heureDebut}`);\n      const resFin = new Date(`${res.dateFin}T${res.heureFin}`);\n      const newDebut = new Date(`${nouvelleReservation.dateDebut}T${nouvelleReservation.heureDebut}`);\n      const newFin = new Date(`${nouvelleReservation.dateFin}T${nouvelleReservation.heureFin}`);\n\n      // Il y a conflit si les périodes se chevauchent\n      return (newDebut < resFin && newFin > resDebut);\n    });\n\n    return conflicts;\n  }\n\n  // Ajouter une nouvelle réservation\n  async addReservation(reservation) {\n    try {\n      // Vérifier d'abord les conflits\n      const conflicts = await this.checkConflicts(reservation);\n      if (conflicts.length > 0) {\n        throw new Error('CONFLIT: Un ou plusieurs créneaux sont déjà réservés');\n      }\n\n      // Générer un ID unique\n      const id = `RES_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n      const values = [[\n        id,\n        reservation.salle,\n        reservation.dateDebut,\n        reservation.heureDebut,\n        reservation.dateFin,\n        reservation.heureFin,\n        reservation.nom,\n        reservation.prenom,\n        reservation.service,\n        reservation.objet,\n        reservation.recurrence ? 'OUI' : 'NON',\n        reservation.recurrenceJusquau || '',\n        reservation.email || ''\n      ]];\n\n      await window.gapi.client.sheets.spreadsheets.values.append({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A:M`,\n        valueInputOption: 'USER_ENTERED',\n        resource: { values }\n      });\n\n      return { success: true, id };\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout de la réservation:', error);\n      throw error;\n    }\n  }\n\n  // Supprimer une réservation\n  async deleteReservation(reservationId) {\n    try {\n      const response = await window.gapi.client.sheets.spreadsheets.values.get({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        range: `${GOOGLE_CONFIG.SHEETS.RESERVATIONS}!A:A`,\n      });\n\n      const rows = response.result.values || [];\n      const rowIndex = rows.findIndex(row => row[0] === reservationId);\n\n      if (rowIndex === -1) {\n        throw new Error('Réservation non trouvée');\n      }\n\n      // Supprimer la ligne (rowIndex + 1 car on commence à 1 dans Sheets)\n      await window.gapi.client.sheets.spreadsheets.batchUpdate({\n        spreadsheetId: GOOGLE_CONFIG.SPREADSHEET_ID,\n        resource: {\n          requests: [{\n            deleteDimension: {\n              range: {\n                sheetId: 0, // ID de l'onglet Réservations\n                dimension: 'ROWS',\n                startIndex: rowIndex + 1,\n                endIndex: rowIndex + 2\n              }\n            }\n          }]\n        }\n      });\n\n      return { success: true };\n    } catch (error) {\n      console.error('Erreur lors de la suppression:', error);\n      throw error;\n    }\n  }\n\n  // Calculer la disponibilité d'une date\n  async getDateAvailability(date) {\n    const reservations = await this.getAllReservations();\n    const dateStr = this.formatDate(date);\n\n    // Vérifier si c'est un dimanche ou jour férié\n    if (date.getDay() === 0 || JOURS_FERIES.includes(dateStr)) {\n      return 'closed'; // Fermé\n    }\n\n    // Compter les créneaux réservés pour cette date\n    const reservationsDuJour = reservations.filter(res => \n      res.dateDebut === dateStr || \n      (res.dateDebut <= dateStr && res.dateFin >= dateStr)\n    );\n\n    if (reservationsDuJour.length === 0) {\n      return 'available'; // Toutes les salles disponibles - VERT\n    }\n\n    // Calculer le nombre total de créneaux possibles\n    const nbSalles = 9; // SALLES.length\n    const nbCreneaux = HORAIRES.HEURE_FIN - HORAIRES.HEURE_DEBUT; // 14 créneaux (8h-22h)\n    const totalCreneauxPossibles = nbSalles * nbCreneaux;\n\n    // Compter les créneaux réservés\n    let creneauxReserves = 0;\n    reservationsDuJour.forEach(res => {\n      const debut = parseInt(res.heureDebut.split(':')[0]);\n      const fin = parseInt(res.heureFin.split(':')[0]);\n      creneauxReserves += (fin - debut);\n    });\n\n    const tauxOccupation = creneauxReserves / totalCreneauxPossibles;\n\n    if (tauxOccupation >= 1) {\n      return 'full'; // Complet - NOIR\n    } else if (tauxOccupation > 0.7) {\n      return 'busy'; // Très occupé - ROUGE\n    } else if (tauxOccupation > 0.3) {\n      return 'partial'; // Partiellement occupé - ORANGE\n    } else {\n      return 'available'; // Disponible - VERT\n    }\n  }\n\n  // Utilitaire: formater une date en YYYY-MM-DD\n  formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  // Utilitaire: formater une heure en HH:00\n  formatTime(hour) {\n    return `${String(hour).padStart(2, '0')}:00`;\n  }\n}\n\nexport default new GoogleSheetsService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}